name: enpass-chrismin13-test
base: core18
version: '6.5.1.723'
summary: Offline Password Manager and Secure Vault. Saves and fill in all your passwords, cards and other details.
description: Offline Password Manager and Secure Vault. Saves and fill in all your passwords, cards and other details.

grade: stable # must be 'stable' to release into candidate/stable channels
confinement: strict # use 'strict' once you have the right plugs and slots

apps:
  enpass:
    command: opt/enpass/Enpass
    desktop: usr/share/applications/enpass.desktop
    extensions: [gnome-3-34]
    plugs:
      - home
      - audio-playback
      - network
      - unity7
      - network-bind

architectures:
  build-on:
    - amd64
  run-on:
    - amd64

parts:
  enpass-deb:
    plugin: dump
    source: "https://apt.enpass.io/pool/main/e/enpass/enpass_$SNAPCRAFT_PROJECT_VERSION_amd64.deb"
    source-type: deb
    stage-packages:
      - libxss1
      - libxkbcommon-x11-0
    override-prime: |
      snapcraftctl prime
      sed -i 's|Icon=.*|Icon=${SNAP}/meta/gui/enpass.svg|g' $SNAPCRAFT_PRIME/usr/share/applications/enpass.desktop
  snap-gui-folder:
    plugin: dump
    source: gui/
    organize:
      enpass.svg: meta/gui/
